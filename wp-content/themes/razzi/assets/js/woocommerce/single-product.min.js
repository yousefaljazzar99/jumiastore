(function(l){"use strict";var d=d||{};d.init=function(){d.$body=l(document.body),d.$window=l(window),d.$header=l("#site-header");this.productVariation();this.singleProductV1();this.singleProductV2();this.singleProductV3();this.singleProductV4();this.singleProductV5();this.productTabs();this.stickyATC();this.productVideo();this.productVideoPopup();this.relatedProductsCarousel(l(".products.related"));this.relatedProductsCarousel(l(".products.upsells"));this.updateFreeShippingBar();this.productAutoBackground()};d.productThumbnails=function(i){var t=l(".woocommerce-product-gallery"),a=t.find(".flex-control-thumbs"),n=t.find(".woocommerce-product-gallery__image.razzi-product-video");t.imagesLoaded(function(){setTimeout(function(){var e=t.data("columns");a.wrap('<div class="woocommerce-product-gallery__thumbs-carousel swiper-container" style="opacity:0"></div>');a.addClass("swiper-wrapper");a.find("li").addClass("swiper-slide");a.after('<span class="razzi-svg-icon rz-thumbs-button-prev rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></span>');a.after('<span class="razzi-svg-icon rz-thumbs-button-next rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>');var r={slidesPerView:e,loop:false,autoplay:false,speed:800,watchOverflow:true,spaceBetween:15,navigation:{nextEl:".rz-thumbs-button-next",prevEl:".rz-thumbs-button-prev"},on:{init:function(){a.parent().css("opacity",1)}},breakpoints:{300:{spaceBetween:0,allowTouchMove:false},991:{spaceBetween:15}}};if(i){r.direction="vertical"}else{r.direction="horizontal"}new Swiper(a.parent(),r);l("li",a).append("<span/>");if(n.length>0){var o=l(".woocommerce-product-gallery").data("video")-1;l(".woocommerce-product-gallery").addClass("has-video");a.find("li").eq(o).append('<div class="razzi-i-video"></div>')}},200)})};d.singleProductV1=function(){var e=l("div.product.layout-v1");if(!e.length){return}d.productThumbnails(false);l(".woocommerce-product-gallery").on("product_thumbnails_slider_horizontal",function(){d.productThumbnails(false)})};d.singleProductV2=function(){var e=l("div.product.layout-v2");if(!e.length){return}d.productThumbnails(true);l(".woocommerce-product-gallery").on("product_thumbnails_slider_vertical",function(){d.productThumbnails(true)})};d.singleProductV3=function(){var e=l("div.product.layout-v3");if(!e.length){return}d.responsiveProductGallery();d.zoomProductImages();l(".woocommerce-product-gallery").on("razzi_gallery_init_zoom",function(){d.zoomProductImages()})};d.singleProductV4=function(){var e=l("div.product.layout-v4");if(!e.length){return}r();l(".woocommerce-product-gallery").on("product-images-slider",function(){r()});function r(){var r=l(".woocommerce-product-gallery"),o=r.find(".woocommerce-product-gallery__wrapper");r.imagesLoaded(function(){if(r.find(".woocommerce-product-gallery__image").length<2){return}r.addClass("swiper-container");o.addClass("swiper-wrapper");o.children().addClass("swiper-slide");o.after('<span class="razzi-svg-icon rz-swiper-button-prev rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></span>');o.after('<span class="razzi-svg-icon rz-swiper-button-next rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>');o.after('<div class="swiper-pagination"></div>');var e={loop:false,autoplay:false,speed:800,watchOverflow:true,spaceBetween:10,navigation:{nextEl:".rz-swiper-button-next",prevEl:".rz-swiper-button-prev"},pagination:{el:".swiper-pagination",type:"bullets",clickable:true},breakpoints:{0:{slidesPerView:1,slidesPerGroup:1},481:{slidesPerView:2,slidesPerGroup:1}}};new Swiper(r,e)})}d.zoomProductImages();l(".woocommerce-product-gallery").on("razzi_gallery_init_zoom",function(){d.zoomProductImages()})};d.singleProductV5=function(){var e=l("div.product.layout-v5");if(!e.length){return}d.zoomProductImages();l(".woocommerce-product-gallery").on("razzi_gallery_init_zoom",function(){d.zoomProductImages()});d.responsiveProductGallery()};d.zoomProductImages=function(){l(".woocommerce-product-gallery").find(".woocommerce-product-gallery__image").each(function(){d.zoomSingleProductImage(this)})};d.productAutoBackground=function(){if(!d.$body.hasClass("product-has-background")){return}var o=l("div.product");e();d.$window.on("resize",function(){e()});if(!o.hasClass("background-set")){d.productBackgroundFromGallery(o.find(".razzi-product-background-content"))}function e(){var e=d.$window.width(),r=o.find(".razzi-product-background-content");r.width(e);if(d.$body.hasClass("rtl")){r.css("margin-right",-e/2)}else{r.css("margin-left",-e/2)}}};d.productTabs=function(){var e=l("div.product");if(!e.hasClass("product-tabs-under-summary")){return}var r=e.find(".woocommerce-tabs"),o=window.location.hash;if(o.toLowerCase().indexOf("comment-")>=0||o==="#reviews"||o==="#tab-reviews"){r.find(".tab-title-reviews").addClass("active");r.find(".woocommerce-Tabs-panel--reviews").show()}l(".woocommerce-review-link").on("click",function(){l(".razzi-accordion-title.tab-title-reviews").trigger("click")});r.on("click",".razzi-accordion-title",function(e){e.preventDefault();if(l(this).hasClass("active")){l(this).removeClass("active");l(this).siblings(".woocommerce-Tabs-panel").stop().slideUp(300)}else{r.find(".razzi-accordion-title").removeClass("active");r.find(".woocommerce-Tabs-panel").slideUp();l(this).addClass("active");l(this).siblings(".woocommerce-Tabs-panel").stop().slideDown(300)}})};d.relatedProductsCarousel=function(e){if(!e.length){return}var r=e.find("ul.products");var o=d.$body.hasClass("razzi-product-card-solid")?false:true;r.wrap('<div class="swiper-container linked-products-carousel" style="opacity: 0;"></div>');r.addClass("swiper-wrapper");r.find("li.product").addClass("swiper-slide");var i=d.$body.hasClass("product-full-width")?5:4;var t={loop:false,on:{init:function(){this.$el.css("opacity",1)}},spaceBetween:o,breakpoints:{300:{slidesPerView:razziData.mobile_portrait==""?2:razziData.mobile_portrait,slidesPerGroup:razziData.mobile_portrait==""?2:razziData.mobile_portrait,spaceBetween:o==true?15:0},480:{slidesPerView:razziData.mobile_landscape==""?3:razziData.mobile_landscape,slidesPerGroup:razziData.mobile_landscape==""?3:razziData.mobile_landscape},768:{spaceBetween:o==true?30:0,slidesPerView:3,slidesPerGroup:3},992:{slidesPerView:3,slidesPerGroup:3},1200:{slidesPerView:i,slidesPerGroup:i,spaceBetween:o==true?30:0}}};if(razziProductData.related_product_navigation=="scrollbar"){r.after('<div class="swiper-scrollbar"></div>');t["scrollbar"]={el:".swiper-scrollbar",hide:false,draggable:true}}else if(razziProductData.related_product_navigation=="arrows"){r.after('<span class="razzi-svg-icon rz-swiper-button-prev rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg></span>');r.after('<span class="razzi-svg-icon rz-swiper-button-next rz-swiper-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg></span>');t["navigation"]={nextEl:e.find(".rz-swiper-button-next"),prevEl:e.find(".rz-swiper-button-prev")}}else{r.after('<div class="swiper-pagination"></div>');t["pagination"]={el:e.find(".swiper-pagination"),type:"bullets",clickable:true}}new Swiper(e.find(".linked-products-carousel"),t)};d.productVariation=function(){d.$body.on("tawcvs_initialized",function(){l(".variations_form").off("tawcvs_no_matching_variations");l(".variations_form").on("tawcvs_no_matching_variations",function(e,r){e.preventDefault();l(".variations_form").find(".woocommerce-variation.single_variation").show();if(typeof wc_add_to_cart_variation_params!=="undefined"){l(".variations_form").find(".single_variation").slideDown(200).html("<p>"+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>")}})});l(".variations_form").on("found_variation.wc-variation-form",function(e,r){var o=l(".div.product").find(".sku_wrapper .sku");if(typeof o.wc_set_content!=="function"){return}if(typeof o.wc_reset_content!=="function"){return}if(r.sku){o.wc_set_content(r.sku)}else{o.wc_reset_content()}})};d.zoomSingleProductImage=function(e){if(typeof wc_single_product_params=="undefined"||!l.fn.zoom){return}if("1"!==razziData.product_image_zoom){return}var r=l(e),i=r.width(),t=false;r.each(function(e,r){var o=l(r).find("img");if(o.data("large_image_width")>i){t=true;return false}});if(t){var o=l.extend({touch:false},wc_single_product_params.zoom_options);if("ontouchstart"in document.documentElement){o.on="click"}r.trigger("zoom.destroy");r.zoom(o)}};d.responsiveProductGallery=function(){if(typeof razziData.product_gallery_slider==="undefined"){return}if(razziData.product_gallery_slider||!l.fn.wc_product_gallery){return}var e=l(window),r=l(".woocommerce div.product"),o=false,i={};if(!r.length){return}var t=l(".woocommerce-product-gallery",r),a=t.clone(),n=t.find(".woocommerce-product-gallery__image.razzi-product-video"),s=false;a.children(".woocommerce-product-gallery__trigger").remove();a.off();if(typeof wc_single_product_params!==undefined){o=wc_single_product_params.flexslider_enabled;i=wc_single_product_params.flexslider}c();e.on("resize",c);function c(){if(e.width()>=992){if(!s){return}if(typeof wc_single_product_params!==undefined){wc_single_product_params.flexslider_enabled=o;wc_single_product_params.flexslider=i}t.replaceWith(a.clone());t=l(".woocommerce-product-gallery",r);t.each(function(){l(this).wc_product_gallery()});l("form.variations_form select",r).trigger("change");if("1"===razziData.product_image_zoom&&r.hasClass("layout-v3","layout-v5")){t.find(".woocommerce-product-gallery__image").each(function(){d.zoomSingleProductImage(this)})}s=false}else{if(s){return}if(typeof wc_single_product_params!==undefined){wc_single_product_params.flexslider_enabled=true;wc_single_product_params.flexslider.controlNav=true}t.replaceWith(a.clone());t=l(".woocommerce-product-gallery",r);setTimeout(function(){t.each(function(){l(this).wc_product_gallery()})},100);l("form.variations_form select",r).trigger("change");s=true;if(n.length>0){l(".woocommerce-product-gallery").addClass("has-video")}}}};d.stickyATC=function(){var r=l("#razzi-sticky-add-to-cart"),e=r.find(".razzi-sticky-add-to-cart__content-button");if(!r.length){return}if(!l("div.product .entry-summary .cart").length){return}var o=0,i;if(d.$body.hasClass("admin-bar")){o+=32}var t=r.hasClass("razzi-sticky-atc_top")?true:false;function a(){i=l(".entry-summary .cart").offset().top+l(".entry-summary .cart").outerHeight()-o;if(window.pageYOffset>i){r.addClass("open");if(d.$body.hasClass("header-sticky")&&t){d.$body.find(".site-header").addClass("rz-header_sticky-act-active")}}else{r.removeClass("open");d.$body.find(".site-header").removeClass("rz-header_sticky-act-active")}if(!t){var e=document.body.scrollHeight;if(window.pageYOffset>e-window.innerHeight){r.removeClass("open")}}}d.$window.on("scroll",function(){a()}).trigger("scroll");if(!e.hasClass("ajax_add_to_cart")){e.on("click",function(e){e.preventDefault();l("html,body").stop().animate({scrollTop:l(".entry-summary").offset().top},"slow")})}};d.productVideo=function(){var i=l(".woocommerce-product-gallery");var e=i.find(".woocommerce-product-gallery__image.razzi-product-video");var r=i.find(".flex-control-thumbs");if(e.length<1){return}r.on("click","li",function(){var e=i.find(".razzi-product-video");var r=e.find("iframe"),o=e.find("video.wp-video-shortcode");if(r.length>0){r.attr("src",r.attr("src"))}if(o.length>0){o[0].pause()}return false});e.find(".video-vimeo > iframe").attr("width","100%").attr("height",500);r.find("li").on("click",".razzi-i-video",function(e){e.preventDefault();l(this).closest("li").find("img").trigger("click")})};d.productVideoPopup=function(){var e=l(".woocommerce-product-gallery").find(".razzi-product-video--icon");if(e.length<1){return}var r={type:"iframe",mainClass:"mfp-fade",removalDelay:300,preloader:false,fixedContentPos:false,iframe:{markup:'<div class="mfp-iframe-scaler">'+'<div class="mfp-close"></div>'+'<iframe class="mfp-iframe" frameborder="0" allow="autoplay"></iframe>'+"</div>",patterns:{youtube:{index:"youtube.com/",id:"v=",src:"https://www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"}},srcAction:"iframe_src"}};e.magnificPopup(r)};d.updateFreeShippingBar=function(){l(document.body).on("removed_from_cart",function(e,r){if(l(".single-product div.product").find(".razzi-free-shipping-bar").length&&l(r["div.widget_shopping_cart_content"]).length){if(l(r["div.widget_shopping_cart_content"]).find(".razzi-free-shipping-bar").length){l(".single-product div.product").find(".razzi-free-shipping-bar").replaceWith(l(r["div.widget_shopping_cart_content"]).find(".razzi-free-shipping-bar"))}else{l(".single-product div.product").find(".razzi-free-shipping-bar").hide()}}});l(document.body).on("added_to_cart",function(e,r){if(l(".single-product div.product").find(".razzi-free-shipping-bar").length&&l(r["div.widget_shopping_cart_content"]).length&&l(r["div.widget_shopping_cart_content"]).find(".razzi-free-shipping-bar").length){l(".single-product div.product").find(".razzi-free-shipping-bar").replaceWith(l(r["div.widget_shopping_cart_content"]).find(".razzi-free-shipping-bar"))}})};d.productBackgroundFromGallery=function(e){if(typeof BackgroundColorTheif=="undefined"){return}var r=e.find(".woocommerce-product-gallery"),o=r.find(".wp-post-image"),i=new BackgroundColorTheif;o.one("load",function(){setTimeout(function(){t(o.get(0))},100)}).each(function(){if(this.complete){l(this).trigger("load")}});r.on("jetpack-lazy-loaded-image",".wp-post-image",function(){l(this).one("load",function(){t(this)})});function t(e){if(e.src===""){return}if(e.classList.contains("jetpack-lazy-image")){if(!e.dataset["lazyLoaded"]){return}}var r=i.getBackGroundColor(e);l("body.product-has-background").css("--rz-product-background-color","rgb("+r[0]+","+r[1]+","+r[2]+")")}};l(function(){d.init()})})(jQuery);