(function(r){"use strict";r.fn.quantityDropdown=function(s){var t={maxItems:5,onChange:null,onInit:null};s=r.extend(t,s);return this.each(function(){var t=r(this),u=t.closest(".quantity"),p=r("<ul/>"),o=parseFloat(t.val()),c=parseFloat(t.attr("min")),l=parseFloat(t.attr("max")),d=parseFloat(t.attr("step")),f=s.maxItems,h=false,v=[],w=[];if(u.data("quantityDropdown")){return this}d=d?d:1;c=c?c:d;if(!l){l=Math.max(f,o);h=true}else if(l<f){f=l}for(var n=c;n<=l;n+=d){if(o==n){r('<li class="active">'+n+"</li>").appendTo(p)}else{r("<li>"+n+"</li>").appendTo(p)}v.push(n)}var e=r('<div class="qty-dropdown"/>').append('<span class="current"><span class="value">'+o+'</span><span class="razzi-svg-icon "><svg class="svg-icon" aria-hidden="true" role="img" focusable="false" width="10" height="5" viewBox="0 0 10 5" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M4.50495 4.82011L0.205241 1.04856C-0.0684137 0.808646 -0.0684137 0.419663 0.205241 0.179864C0.478652 -0.0599547 0.922098 -0.0599547 1.19549 0.179864L5.00007 3.5171L8.80452 0.179961C9.07805 -0.0598577 9.52145 -0.0598577 9.79486 0.179961C10.0684 0.41978 10.0684 0.808743 9.79486 1.04866L5.49508 4.8202C5.35831 4.94011 5.17925 5 5.00009 5C4.82085 5 4.64165 4.94 4.50495 4.82011Z"/></svg></span></span>').append(p).appendTo(u);p.wrap('<div class="qty-options"/>');u.addClass("razzi-quantity-dropdown");u.data("quantityDropdown",s);u.on("click",".qty-dropdown .current",function(){var t=r(this),n=t.next(".qty-options"),e=t.outerHeight();o=parseFloat(t.find(".value").text());a(o);n.css("height",f*e-50);n.fadeToggle()}).on("click",".qty-dropdown li",function(){var t=r(this);o=parseFloat(t.text());t.addClass("active").siblings(".active").removeClass("active");t.closest(".qty-options").fadeOut();t.closest(".qty-dropdown").find(".current .value").text(o);t.closest(".quantity").find(".qty").val(o).trigger("change");if(typeof s.onChange==="function"){s.onChange(o,u)}});u.find(".qty-dropdown .qty-options").on("wheel",function(t){if(t.originalEvent.deltaY<0){a("up")}else{i()}return false}).on("swipeup",function(){i()}).on("swipedown",function(){a("up")});r(document.body).on("click",function(t){if(!e.is(t.target)&&e.has(t.target).length===0){u.find(".qty-options").fadeOut()}});function i(){var t=Math.max.apply(null,w);if(t>=l&&h){l+=d;v.push(l);p.append("<li>"+l+"</li>")}a("down")}function a(t){var n=u.find(".current").outerHeight(),e=Math.min.apply(null,w),o=Math.max.apply(null,w),i=0;if("up"===t){if(e<=c){return}i=-v.indexOf(e-d)*n;w.pop();w.unshift(e-d)}else if("down"===t){if(o>=l){return}i=-v.indexOf(e+d)*n;w.shift();w.push(o+1)}else{var a=v.indexOf(t),s=Math.floor(f/2);if(a>s){a=a-s}else{a=0}w=[];for(var r=a;r<a+f;r++){if(r in v){w.push(v[r])}else if(h){l=l+d;v.push(l);w.push(l);p.append("<li>"+l+"</li>")}}i=-a*n}p.css("transform","translate3d(0, "+i+"px, 0)")}})}})(jQuery);(function(s){function t(){var t=" -webkit- -moz- -o- -ms- ".split(" ");var n=function(t){return window.matchMedia(t).matches};if("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch){return true}var e=["(",t.join("touch-enabled),("),"heartz",")"].join("");return n(e)}var n=t(),e=n?"touchstart":"mousedown",r=n?"touchend":"mouseup",u=n?"touchmove":"mousemove";s.event.special.swipeupdown={setup:function(){var t=this;var a=s(t);a.on(e,function(t){var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,e={time:(new Date).getTime(),coords:[n.pageX,n.pageY],origin:s(t.target)},o;function i(t){if(!e){return}var n=t.originalEvent.touches?t.originalEvent.touches[0]:t;o={time:(new Date).getTime(),coords:[n.pageX,n.pageY]};if(Math.abs(e.coords[1]-o.coords[1])>10){t.preventDefault()}}a.on(u,i).one(r,function(t){a.off(u,i);if(e&&o){if(o.time-e.time<1e3&&Math.abs(e.coords[1]-o.coords[1])>30&&Math.abs(e.coords[0]-o.coords[0])<75){e.origin.trigger("swipeupdown").trigger(e.coords[1]>o.coords[1]?"swipeup":"swipedown")}}e=o=undefined})})}};s.each({swipedown:"swipeupdown",swipeup:"swipeupdown"},function(n,t){s.event.special[n]={setup:function(){s(this).on(t,s.noop)}};s.fn[n]=function(t){return t?this.on(n,t):this.trigger(n)}})})(jQuery);